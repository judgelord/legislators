<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A suite of functions to detect U.S. legislator names in messy text with typos and inconsistent name formats.
    Example data from the Congressional Record and congressional letters to the Federal Energy Regulatory Commission are provided.">
<title>Detect legislator names in messy text • legislators</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Detect legislator names in messy text">
<meta property="og:description" content="A suite of functions to detect U.S. legislator names in messy text with typos and inconsistent name formats.
    Example data from the Congressional Record and congressional letters to the Federal Energy Regulatory Commission are provided.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">legislators</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.1000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/legislators.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/judgelord/legislators/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p><img src="reference/figures/logo.png" width="200"></p>
<div class="section level2">
<h2 id="a-package-to-detect-us-legislator-names-in-messy-text-with-typos-and-inconsistent-name-formats">A package to detect U.S. legislator names in messy text with typos
and inconsistent name formats<a class="anchor" aria-label="anchor" href="#a-package-to-detect-us-legislator-names-in-messy-text-with-typos-and-inconsistent-name-formats"></a>
</h2>
<p>Install this package with</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"judgelord/legislators"</span>)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://judgelord.github.io/legislators/" class="external-link">legislators</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>This package relies on a dataframe (<code>members</code>) of
permutations of the names of members of Congress. This dataframe builds
on the basic structure of voteview.com data, especially the
<code>bioname</code> field. From this and other corrections, it
constructs a regular expression search <code>pattern</code> and
conditions under which this pattern should yield a match (e.g. when that
pattern has a unique match to a member of Congress in a given Congress).
<code>pattern</code> differs from Congress to Congress because some
member move from the House to the Senate and because members with
similar names join or leave Congress. Users can customize the provided
<code>members</code> data and supply their updted version to
<code>extractMemberNames()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"members"</span><span class="op">)</span>

<span class="va">members</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"chamber"</span>, <span class="st">"congress"</span>, <span class="st">"bioname"</span>, <span class="st">"pattern"</span><span class="op">)</span><span class="op">]</span> </code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6,566 × 4</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    chamber   congress bioname                        pattern                                                                                                                                            </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;chr&gt;                          &lt;chr&gt;                                                                                                                                              </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 President      108 BUSH, George Walker            "george bush|george walker bush|\\bg bush|george w bush|\\bna bush|(^|senator |representative )bush\\b|bush, george|bush george|bush, g\\b|preside…</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 House          108 DEAL, John Nathan              "john deal|john nathan deal|\\bj deal|john n deal|nathan deal|nathan nathan deal|nathan n deal|\\bn deal|(^|senator |representative )deal\\b|deal,…</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 Senate         108 CAMPBELL, Ben Nighthorse       "ben campbell|ben nighthorse campbell|\\bb campbell|ben n campbell|benjamin campbell|benjamin nighthorse campbell|benjamin n campbell|(^|senator |…</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 House          108 HALL, Ralph Moody              "ralph hall|ralph moody hall|\\br hall|ralph m hall|\\bna hall|(^|senator |representative )hall\\b|hall, ralph|hall ralph|hall, r\\b|representativ…</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 House          108 TAUZIN, Wilbert Joseph (Billy) "wilbert tauzin|wilbert joseph tauzin|\\bw tauzin|wilbert j tauzin|billy tauzin|billy joseph tauzin|billy j tauzin|\\bb tauzin|(^|senator |represe…</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Senate         108 SHELBY, Richard C.             "richard shelby|richard c shelby|\\br shelby|rich shelby|rich c shelby|(^|senator |representative )shelby\\b|shelby, rich|shelby, richard|shelby r…</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Senate         108 JEFFORDS, James Merrill        "james jeffords|james merrill jeffords|\\bj jeffords|james m jeffords|jim jeffords|jim merrill jeffords|jim m jeffords|(^|senator |representative …</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 House          108 GOODE, Virgil H., Jr.          "virgil goode|virgil h goode|\\bv goode|\\bna goode|(^|senator |representative )goode\\b|goode, virgil|goode virgil|goode, v\\b|representative goo…</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 Senate         108 CHAFEE, Lincoln Davenport      "lincoln chafee|lincoln davenport chafee|\\bl chafee|lincoln d chafee|\\bna chafee|(^|senator |representative )chafee\\b|chafee, lincoln|chafee li…</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 Senate         108 MILLER, Zell Bryan             "zell miller|zell bryan miller|\\bz miller|zell b miller|(^|senator |representative )miller\\b.{1,4}ga|miller, zell|miller zell|miller, z\\b|senat…</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 6,556 more rows</span></span></code></pre></div>
<p>Before searching the text, several functions clean it and “fix”
common human typos and OCR errors that frustrate matching. Some of these
corrections are currently supplied by <code>MemberNameTypos.R</code>. In
future versions, <code>typos</code> will be supplied as a dataframe
instead, and all types of corrections (cleaning, typos, OCR erros) will
be optional. Additionally, users will be able to customize the
<code>typos</code> dataframe and provide it as an argument to
<code>extractMemberNames()</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"typos"</span><span class="op">)</span>

<span class="va">typos</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 480 × 2</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    typos                                                                                                  correct             </span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                                                                                                  &lt;chr&gt;               </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 ( 0 | 0, )                                                                                             " o "               </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 aaron( | [a-z]* )s chock($| |,|;)|s chock, aaron                                                       "aaron schock"      </span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 adam( | [a-z]* )(schif|sdxiff)($| |,|;)|(schif|sdxiff), adam                                           "adam schiff"       </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 adrian( | [a-z]* )espaillat|espaillat, adrian|adriano( | [a-z]* )espaillet($| |,|;)|espaillet, adriano "adriano espaillat" </span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 al( | [a-z]* )fianken($| |,|;)|fianken, al                                                             "al franken"        </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 (alccc|ateee)( | [a-z]* )hastings|hastings, (alccc|ateee)                                              "alcee hastings"    </span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 allyson( | [a-z]* )schwaltz($| |,|;)|schwaltz, allyson                                                 "allyson schwartz"  </span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 allyson d schwartz|schwartz, allyson d                                                                 "allyson y schwartz"</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 ami( | [a-z]* )(beta|gera)($| |,|;)|(beta|gera), ami                                                   "ami bera"          </span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 amy( | [a-z]* )klobachur|klobachar($| |,|;)|klobachur|klobachar, amy                                   "amy klobuchar"     </span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 470 more rows</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>The main function is <code><a href="reference/extractMemberName.html">extractMemberName()</a></code> returns a
dataframe of the names and ICPSR ID numbers of members of Congress in a
supplied vector of text.</p>
<ul>
<li>in the future, <code><a href="reference/extractMemberName.html">extractMemberName()</a></code> may default to
returning a list of dataframes the same length of the supplied data</li>
</ul>
<p>For example, we can use <code><a href="reference/extractMemberName.html">extractMemberName()</a></code> to detect
the names of members of Congress in the text of the Congressional
Record. Let’s start with text of the Congressional Record from 3/1/2007,
scraped and parsed using methods described <a href="https://github.com/judgelord/cr" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cr2007_03_01"</span><span class="op">)</span>

<span class="va">cr2007_03_01</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 154 × 5</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    date       speaker                             header                                                            url                                          url_txt                                </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;date&gt;     &lt;chr&gt;                               &lt;chr&gt;                                                             &lt;chr&gt;                                        &lt;chr&gt;                                  </span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2007-03-01 HON. SAM GRAVES;Mr. GRAVES          RECOGNIZING JARRETT MUCK FOR ACHIEVING THE RANK OF EAGLE SCOUT; … https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2007-03-01 HON. MARK UDALL;Mr. UDALL           INTRODUCING A CONCURRENT RESOLUTION HONORING THE 50TH ANNIVERSAR… https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2007-03-01 HON. JAMES R. LANGEVIN;Mr. LANGEVIN BIOSURVEILLANCE ENHANCEMENT ACT OF 2007; Congressional Record Vo… https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2007-03-01 HON. JIM COSTA;Mr. COSTA            A TRIBUTE TO THE LIFE OF MRS. VERNA DUTY; Congressional Record V… https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2007-03-01 HON. SAM GRAVES;Mr. GRAVES          RECOGNIZING JARRETT MUCK FOR ACHIEVING THE RANK OF EAGLE SCOUT    https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2007-03-01 HON. SANFORD D. BISHOP;Mr. BISHOP   IN HONOR OF SYNOVUS BEING NAMED ONE OF THE BEST COMPANIES IN AME… https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2007-03-01 HON. EDOLPHUS TOWNS;Mr. TOWNS       NEW PUNJAB CHIEF MINISTER URGED TO WORK FOR SIKH SOVEREIGNTY; Co… https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2007-03-01 HON. TOM DAVIS;Mr. TOM DAVIS        HONORING THE 30TH ANNIVERSARY OF THE BAILEY'S CROSSROADS ROTARY … https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2007-03-01 HON. SAM GRAVES;Mr. GRAVES          RECOGNIZING BRIAN PATRICK WESSLING FOR ACHIEVING THE RANK OF EAG… https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2007-03-01 HON. MARK UDALL;Mr. UDALL           INTRODUCTION OF ROYALTY-IN-KIND FOR ENERGY ASSISTANCE LEGISLATIO… https://www.congress.gov/congressional-reco… https://www.congress.gov/117/crec/2007…</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 144 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cr2007_03_01</span><span class="op">$</span><span class="va">url</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "https://www.congress.gov/congressional-record/2007/03/01/extensions-of-remarks-section/article/E431-2"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2] "https://www.congress.gov/congressional-record/2007/03/01/extensions-of-remarks-section/article/E431-3"</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] "https://www.congress.gov/congressional-record/2007/03/01/extensions-of-remarks-section/article/E431-4"</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] "https://www.congress.gov/congressional-record/2007/03/01/extensions-of-remarks-section/article/E431-5"</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] "https://www.congress.gov/congressional-record/2007/03/01/extensions-of-remarks-section/article/E431-1"</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] "https://www.congress.gov/congressional-record/2007/03/01/extensions-of-remarks-section/article/E432-2"</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cr2007_03_01</span><span class="op">$</span><span class="va">speaker</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "HON. SAM GRAVES;Mr. GRAVES"          "HON. MARK UDALL;Mr. UDALL"           "HON. JAMES R. LANGEVIN;Mr. LANGEVIN" "HON. JIM COSTA;Mr. COSTA"            "HON. SAM GRAVES;Mr. GRAVES"         </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] "HON. SANFORD D. BISHOP;Mr. BISHOP"</span></span></code></pre></div>
<p>This is an extremely simple example because the text strings
containing the names of the members of Congress (<code>speaker</code>)
are short and do not contain much other text. However,
<code><a href="reference/extractMemberName.html">extractMemberName()</a></code> is also capable of searching longer and
much messier texts, including text where names are not consistently
formatted or where they contain common typos introduced by humans or
common OCR errors. Indeed, these functions were developed to identify
members of Congress in ugly text data like <a href="https://judgelord.github.io/corr/corr_pres.html#22" class="external-link">this</a>.</p>
<p>To better match member names, this function currently requires
either</p>
<ul>
<li>a column “congress” (this can be created from a date) or</li>
<li>a vector of congresses to limit the search to
(<code>congresses</code>)</li>
</ul>
<div class="section level3">
<h3 id="extractmembername">
<code>extractMemberName()</code><a class="anchor" aria-label="anchor" href="#extractmembername"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cr2007_03_01</span><span class="op">$</span><span class="va">congress</span> <span class="op">&lt;-</span> <span class="fl">110</span>

<span class="co"># extract legislator names and match to voteview ICPSR numbers</span>
<span class="va">cr</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/extractMemberName.html">extractMemberName</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cr2007_03_01</span>, 
                        col_name <span class="op">=</span> <span class="st">"speaker"</span>, <span class="co"># The text strings to search</span>
                        congresses <span class="op">=</span> <span class="fl">110</span>, <span class="co"># This argument is not required in this case because the data contain a "congress" column</span>
                        members <span class="op">=</span> <span class="va">members</span> <span class="co"># Member names augmented from voteview come with this package, but users can also supply a customised data frame</span>
                        <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Typos fixed in 5 seconds</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Searching  data for members of the 110th, n = 154 (123 distinct strings).</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Names matched in 7 seconds</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = c("congress", "pattern", "first_name", "last_name")</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cr</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 194 × 16</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    data_row_id match_id icpsr bioname                    string                           pattern        chamber congress date       speaker  header      url       url_txt   first_name last_name state</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                      &lt;chr&gt;                            &lt;chr&gt;          &lt;chr&gt;      &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 000001      000001   20124 GRAVES, Samuel             hon sam graves;mr graves         "samuel grave… House        110 2007-03-01 HON. SA… RECOGNIZIN… https://… https://… Samuel     GRAVES    miss…</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 000002      000002   29906 UDALL, Mark                hon mark udall;mr udall          "mark udall|\… House        110 2007-03-01 HON. MA… INTRODUCIN… https://… https://… Mark       UDALL     colo…</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 000003      000003   20136 LANGEVIN, James            hon james r langevin;mr langevin "james langev… House        110 2007-03-01 HON. JA… BIOSURVEIL… https://… https://… James      LANGEVIN  rhod…</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 000004      000004   20501 COSTA, Jim                 hon jim costa;mr costa           "jim costa|\\… House        110 2007-03-01 HON. JI… A TRIBUTE … https://… https://… Jim        COSTA     cali…</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 000005      000005   20124 GRAVES, Samuel             hon sam graves;mr graves         "samuel grave… House        110 2007-03-01 HON. SA… RECOGNIZIN… https://… https://… Samuel     GRAVES    miss…</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 000006      000006   29339 BISHOP, Sanford Dixon, Jr. hon sanford d bishop;mr bishop   "sanford bish… House        110 2007-03-01 HON. SA… IN HONOR O… https://… https://… Sanford    BISHOP    geor…</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 000007      000007   15072 TOWNS, Edolphus            hon edolphus towns;mr towns      "edolphus tow… House        110 2007-03-01 HON. ED… NEW PUNJAB… https://… https://… Edolphus   TOWNS     new …</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 000008      000008   29576 DAVIS, Thomas M., III      hon tom davis;mr tom davis       "thomas davis… House        110 2007-03-01 HON. TO… HONORING T… https://… https://… Thomas     DAVIS     virg…</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 000009      000009   20124 GRAVES, Samuel             hon sam graves;mr graves         "samuel grave… House        110 2007-03-01 HON. SA… RECOGNIZIN… https://… https://… Samuel     GRAVES    miss…</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 000010      000010   29906 UDALL, Mark                hon mark udall;mr udall          "mark udall|\… House        110 2007-03-01 HON. MA… INTRODUCTI… https://… https://… Mark       UDALL     colo…</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 184 more rows</span></span></code></pre></div>
<p>In this example, all observations are in the 110th Congress, so we
only search for members who served in the 110th. Because each row’s
<code>speaker</code> text contains only one member in this case,
<code>data_row_id</code> and <code>match_id</code> are the same. Where
multiple members are detected, there may be multiple matches per
<code>data_row_id</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="todo">TODO<a class="anchor" aria-label="anchor" href="#todo"></a>
</h2>
<div class="section level3">
<h3 id="augmentcongress">
<code>augmentCongress()</code><a class="anchor" aria-label="anchor" href="#augmentcongress"></a>
</h3>
<p><code>augmentCongress()</code> will augments a dataframe that
includes at least one unique identifier to include a suite of other
common identifiers.</p>
<p>Because <code>extractMemberName</code> links each detected name to
ICPSR IDs from voteview.com, we already have some information, like
party (<code>party_name</code>), state, district, and ideology scores
(<code>nominate.dim1</code>) for each legislator detected in the
text.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span><span class="va">cr</span>, <span class="va">members</span><span class="op">)</span> |&gt; <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">data_row_id</span>, <span class="va">match_id</span>, <span class="va">bioname</span>, <span class="va">icpsr</span>, <span class="va">congress</span>, <span class="va">state</span>, <span class="va">district_code</span>, <span class="va">party_name</span>, <span class="va">nominate.dim1</span>, <span class="va">url</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = c("icpsr", "bioname", "pattern", "chamber", "congress", "first_name", "last_name", "state")</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6,667 × 10</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    data_row_id match_id bioname                    icpsr congress state        district_code party_name       nominate.dim1 url                                                                         </span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;                      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;                &lt;int&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;                                                                       </span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 000001      000001   GRAVES, Samuel             20124      110 missouri                 6 Republican Party         0.442 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 000002      000002   UDALL, Mark                29906      110 colorado                 2 Democratic Party        -0.353 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 000003      000003   LANGEVIN, James            20136      110 rhode island             2 Democratic Party        -0.375 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 000004      000004   COSTA, Jim                 20501      110 california              20 Democratic Party        -0.191 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 000005      000005   GRAVES, Samuel             20124      110 missouri                 6 Republican Party         0.442 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 000006      000006   BISHOP, Sanford Dixon, Jr. 29339      110 georgia                  2 Democratic Party        -0.282 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 000007      000007   TOWNS, Edolphus            15072      110 new york                10 Democratic Party        -0.519 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 000008      000008   DAVIS, Thomas M., III      29576      110 virginia                11 Republican Party         0.282 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 000009      000009   GRAVES, Samuel             20124      110 missouri                 6 Republican Party         0.442 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 000010      000010   UDALL, Mark                29906      110 colorado                 2 Democratic Party        -0.353 https://www.congress.gov/congressional-record/2007/03/01/extensions-of-rema…</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 6,657 more rows</span></span></code></pre></div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>
integrate with the <a href="https://github.com/ippsr/congress" class="external-link"><code>congress</code></a>
and/or <code>congressData</code> packages. For example, we may want a
function, <code>augmentCongress</code> to simply join in identifiers for
other datasets on ICPSR numbers. Perhaps this is best left to
<code>congress</code>.</li>
</ul>
<!-- --><div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add other common unique identifiers</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>cr_augmented <span class="ot">&lt;-</span> <span class="fu">augmentCongress</span>(cr)</span></code></pre></div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/judgelord/legislators/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/judgelord/legislators/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing legislators</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Devin Judge-Lord <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4384-4380" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Maggie Nead <br><small class="roles"> Author </small>  </li>
<li>Noah Greifer <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-3067-7154" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Devin Judge-Lord, Maggie Nead, Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
